<% provide(:title, "投稿") %>

<div class="row justify-content-center mt-4">
  <div class="col-md-5 col-lg-4">

    <div class="row mb-3 py-3" style="background-color: #f0f0f0;">
      <div class="col-2">
        <%= link_to (icon_for @post.user, size: 40), @post.user %>
      </div>

      <div class="col-10">
        <div>
          <strong><%= @post.user.name %></strong>
          <% if current_user.following?(@post.user) %>
          <small class="fas fa-check-circle ml-1 text-primary"></small>
          <% end %>

          <% if current_user?(@post.user) %>
          <span class="dropdown float-right">
            <button class="px-0 border-0 bg-transparent" data-toggle="dropdown" data-display="static">
              <small class="fas fa-ellipsis-v text-secondary"></small>
            </button>
            <div class="dropdown-menu dropdown-menu-right dropdown-menu-md-left">
              <%= link_to "編集", edit_post_path(@post), class: "dropdown-item" %>
              <%= link_to "削除", @post, method: :delete, data: {confirm: "投稿を削除しますか？"}, class: "dropdown-item" %>
            </div>
          </span>
          <% end %>
        </div>

        <p class="my-2"><%= @post.question %></p>
        <p class="my-2"><%= @post.answer %></p>

        <%= render "posts/post_menu", post: @post %>

        <small class="text-secondary"><%= l @post.created_at %></small>
      </div>
    </div>

    <%= render "comments/form" %>
    <hr class="mt-4">
  </div>

  <div class="col-md-5 col-lg-4 offset-md-1">
    <ul>
      <%= render @comments, post: @post %>
    </ul>

    <%= will_paginate @comments %>
  </div>
</div>